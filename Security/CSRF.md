## CSRF(Cross-Site Request Forgery)

사용자가 자신도 모르게 공격자가 의도한 요청을 보내도록 유도하는 기법

즉, 피해자는 로그인한 상태에서, 공격자가 보낸 요청을 자신이 보낸 것처럼 처리하게 됨

## 예시

1. 사용자가 은행 사이트 A에 로그인
2. 로그인 쿠키가 브라우저에 저장됨(예: session=abc123)
3. 사용자가 공격자가 만든 악성 사이트 B에 방문
4. 사이트 B가 몰래 이런 요청을 자동 실행

```
<img src="https://bank.com/transfer?to=attacker&amount=10000" />
```

5. 브라우저는 자동으로 은행 사이트의 쿠키(session=abc123)를 포함해서 이 요청을 보냄
6. 서버는 진짜 사용자가 요청한 줄 알고 이체 처리

## 조건

- 사용자가 로그인 상태: 쿠키나 세션이 유지되고 있어야 함
- 자동 요청 가능: 이미지, 스크립트 등으로 자동 요청이 가능해야 함
- 서버가 검증을 안 함: 요청이 진짜 사용자 의도인지 확인하지 않음

## 방어법

- CSRF 토큰 사용: 폼 요청마다 고유한 토큰을 넣고, 서버에서 검증
- Referer 검증: 요청의 Referer 헤더가 같은 사이트에서 왔는지 확인
- SameSite 쿠키 설정: Set-Cookie: SameSite=Strict → 타 사이트 요청 시 쿠키 전송 차단
- GET → POST로 바꾸기: 위험한 요청은 POST로 제한하고 CSRF 방어 적용
- 
