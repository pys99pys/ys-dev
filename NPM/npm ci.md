# npm ci

Node.js 프로젝트에서 정확하고 빠르게 의존성을 설치할 수 있는 명령어로, 일반적으로 `npm install`과 비슷하지만, CI 환경이나 재현 가능한 빌드를 위해 특별히 설계되었음

## 특징

- 빠름: node_modules를 지우고 빠르게 재설치
- 정확함: package-lock.json을 정확히 반영
- 일관성: CI 환경에서 동일한 버전 보장
- 안정성: package-lock.json과 package.json이 불일치하면 실패

## 동작 방식

1. node_modules 폴더 삭제
2. package-lock.json에 정의된 의존성 버전만 설치
3. package.json과 lock 파일이 일치하지 않으면 실패

## npm install vs npm ci

| 항목               | `npm install`                          | `npm ci`                                      |
|--------------------|----------------------------------------|-----------------------------------------------|
| 사용 목적          | 개발 중 일반적인 의존성 설치          | CI/CD, 자동화 환경에서 빠르고 일관된 설치    |
| `node_modules` 처리| 유지 또는 덮어쓰기                     | **기존 삭제 후 새로 설치**                   |
| `package-lock.json`| 참고는 하지만 꼭 따르진 않음          | **정확하게 따라야 함**                       |
| 설치 속도          | 상대적으로 느림                       | 빠름                                          |
| 일관성             | 실행 시마다 결과가 다를 수 있음        | 항상 **동일한 결과** 보장                    |
| 에러 발생 조건     | `package.json`과 lock 파일이 달라도 설치됨 | 두 파일 불일치 시 **설치 실패**           |
| CI/CD 적합성       | ❌ 일반적으로 부적합                   | ✅ **최적화되어 있음**                        |

## 사용처

- CI/CD 파이프라인에서 빠르게 빌드할 때
- 재현 가능한 환경이 필요한 테스트/배포 스크립트 작성 시
- docker build 등 완전히 클린한 환경에서 의존성 설치할 때

