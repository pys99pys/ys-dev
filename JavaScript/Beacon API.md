# Beacon API

비동기적인 HTTP 요청을 보내기 위한 웹 API로, 페이지를 떠나거나 리소스를 정리할 때 데이터를 서버로 보내는 데 사용됨

## 특징

### 비동기성

- sendBeacon은 데이터를 전송한 후에도 페이지가 정상적으로 종료되거나 리소스가 정리되는 것을 방해하지 않음
- 즉, 페이지가 닫히거나 새로고침될 때도 데이터를 안전하게 전송할 수 있음

### 단방향 요청

- sendBeacon은 응답을 기다리지 않음
- 요청을 보낸 후 서버로부터 응답을 받지 않아도 페이지의 흐름이나 리소스를 방해하지 않아서 유용함

### 간단한 사용법

- sendBeacon은 보통 POST 방식으로 데이터를 보내며, 데이터를 간단히 전송할 수 있는 방법을 제공

### 데이터 전송

- sendBeacon은 주로 작은 데이터(예: 분석 데이터, 로그, 트래킹 정보 등)를 전송할 때 사용되며, 대형 파일 전송에는 적합하지 않음

## 사용법

```
navigator.sendBeacon(url, data);
```

- url: 데이터를 보낼 서버의 URL
- data: 전송할 데이터(보통 FormData, Blob, String 형태로 전송)

## 예시

```
const url = 'https://example.com/track';
const data = JSON.stringify({
  event: 'page_exit',
  timestamp: new Date().toISOString(),
});

// 페이지가 종료될 때, 데이터를 서버로 보내기
window.addEventListener('beforeunload', () => {
  navigator.sendBeacon(url, data);
});
```

- 이 코드에서는 페이지가 종료되기 직전에 sendBeacon을 사용해 서버에 이벤트 데이터를 전송하는 예시

## 주요 사용처

- 웹 분석: 페이지를 떠날 때 사용자의 행동 데이터나 방문 기록을 서버로 전송
- 사용자 활동 추적: 특정 이벤트(예: 버튼 클릭, 폼 제출 등)가 발생할 때 서버로 정보를 전송
- 비정기적인 서버 통신: 페이지의 종료 또는 사용자가 떠날 때의 이벤트 데이터를 비동기적으로 서버에 전송
- 로그 전송: 페이지 종료 시 오류 로그나 성능 정보를 서버에 전송

## 장점

- 페이지 종료 시 데이터 손실 방지: 페이지가 닫히거나 새로고침되기 전에 중요한 데이터를 서버로 전송할 수 있음
- 백그라운드에서 실행: 요청이 비동기적으로 처리되기 때문에 페이지의 로딩이나 종료에 방해되지 않음
- 효율적인 리소스 사용: 작은 데이터를 전송하는 데 최적화되어 있어 네트워크 자원을 효율적으로 사용

## 단점

- 응답 없음: 서버로부터 응답을 받지 않으므로, 전송이 성공했는지 실패했는지 알 수 없음 -> 서버가 응답을 필요로 하는 경우에는 적합하지 않음
- 대형 데이터 전송에 부적합: 대용량 파일 전송이나 복잡한 데이터를 다루는 데는 적합하지 않음
