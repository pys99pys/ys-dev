# 버추얼 돔(Virtual DOM)

웹 애플리케이션에서 효율적으로 UI를 업데이트하기 위한 기법

실제 DOM을 직접 변경하는 것보다 빠르고 효율적으로 동작할 수 있음

React와 같은 라이브러리에서 자주 사용됨

## 개념

**DOM (Document Object Model)**은 웹 페이지의 HTML 구조를 표현하는 객체 모델

그러나 실제 DOM을 변경하는 것은 비용이 많이 드는 작업이기 때문에 성능 저하를 초래할 수 있음

버추얼 돔은 실제 DOM을 추상화한 가상 DOM을 메모리 상에서 만들고 실제 DOM에 변화를 주기 전에 최적화된 방식으로 비교하고 업데이트하는 방식

이로 인해 UI 업데이트가 더 빠르고 효율적으로 이루어짐

## 동작 방식

### 1. 초기 렌더링

- 처음에는 실제 DOM이 아닌 버추얼 돔을 생성해 UI를 표현
- 버추얼 돔은 JavaScript 객체, 페이지의 UI 구조를 메모리에서 관리

### 2. 상태 변화(State Change)

- 사용자 입력, 데이터 변경 등으로 UI에 변화가 필요할 때 실제 DOM을 직접 변경하지 않고 버추얼 돔을 업데이트
- 변경된 상태는 버추얼 돔에서만 처리됨

### 3. 변경 사항 비교(Reconciliation)

- 상태가 변경되면 새로운 버추얼 돔과 이전 버추얼 돔을 비교, 이 과정을 **"diffing"**이라고 함
- 두 버추얼 돔을 비교한 후 실제 DOM에서 최소한의 변경만 발생하도록 최적화된 패치를 생성

### 4. 실제 DOM 업데이트

diffing을 통해 최적화된 결과가 나온 후 실제 DOM에 최소한의 변경만 적용

## 장점

1. 빠른 렌더링: 버추얼 돔을 사용하면 실제 DOM을 직접 변경하는 대신 메모리에서 가상 DOM을 먼저 처리하고 변경된 부분만 실제 DOM에 반영하기 때문에 렌더링 성능이 향상됨
2. 최소한의 업데이트: diffing 알고리즘을 통해 불필요한 DOM 업데이트를 피하고 변경된 부분만 최적화해서 업데이트해, 이로 인해 렌더링 속도가 빨라지고 성능이 향상됨
3. 효율적인 렌더링: 리렌더링 시 전체 페이지를 다시 그리는 것이 아니라 변경된 부분만 다시 렌더링하기 때문에 불필요한 작업을 줄일 수 있음
4. 동기화 문제 해결: 실제 DOM을 직접 변경할 때 발생할 수 있는 동기화 문제를 줄여주고 상태 변화에 맞게 UI를 자연스럽게 업데이트할 수 있음

## 단점

1. 메모리 오버헤드: 버추얼 돔을 메모리에서 처리하기 때문에 일부 경우에 메모리 사용량이 늘어날 수 있음, 하지만 실제 DOM 변경에 비해 그 오버헤드는 적은 편
2. 복잡성 증가: 버추얼 돔의 diffing과 reconciliation 과정은 복잡하기 때문에 이를 처리하는 로직이 추가로 필요, 특히 대규모 애플리케이션에서는 diffing 성능이 중요한 요소가 될 수 있음
