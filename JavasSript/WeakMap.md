# WeakMap

WeakMap은 키-값 쌍을 저장하는 자료구조인데, 키는 반드시 객체만 가능하고, 그 객체가 메모리에서 사라지면 자동으로 WeakMap에서도 사라져짐(자동 GC)

## 특징

- 키: 오직 객체만 가능(Map은 모든 타입 가능)
- GC: 참조가 끊긴 객체는 자동으로 제거됨
- 반복 불가: forEach, for...of 안 됨
- 프라이빗 데이터 저장 용도로 적합	

## 사용 예시

```
const wm = new WeakMap();

const user = { name: "ys" };
wm.set(user, "프라이빗 데이터");

// 값 가져오기
console.log(wm.get(user)); // "프라이빗 데이터"

// 객체가 사라지면?
user = null;
// -> 이 시점에서 해당 객체는 GC 대상이 되고 WeakMap에서도 자동 제거됨
```

## 사용 이유

- 일반 Map은 강한 참조라 객체를 키로 쓰면 GC가 안 됨
- WeakMap은 약한 참조(weak reference)라 메모리 누수 방지에 좋음
- 프라이빗 필드처럼 외부에서 접근 못하게 객체 정보 저장할 때도 유용

## Map vs WeakMap

| 항목 | `Map` | `WeakMap` |
|------|--------|------------|
| 키 타입 | 모든 값 | 객체만 가능 |
| GC 영향 | 강한 참조 → 객체가 살아있음 | 약한 참조 → 객체 없어지면 자동 제거 |
| 반복 가능 | ✅ (`forEach`, `for...of`) | ❌ 안 됨 |
| 주 용도 | 일반 키-값 저장 | 프라이빗 데이터 저장, 메모리 관리 |
