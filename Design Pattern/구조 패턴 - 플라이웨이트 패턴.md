# ν”λΌμ΄μ›¨μ΄νΈ ν¨ν„΄(Flyweight Pattern)

κ³µμ ν•  μ μλ” κ°μ²΄λ¥Ό μµλ€ν• ν™μ©ν•μ—¬ λ©”λ¨λ¦¬ μ‚¬μ©μ„ μ¤„μ΄λ” ν¨ν„΄

## νΉμ§•

- λ°λ³µμ μΌλ΅ μ‚¬μ©λλ” κ°μ²΄λ¥Ό κ³µμ ν•μ—¬ λ©”λ¨λ¦¬ μ‚¬μ©μ„ μµμ ν™”
- κ°μ²΄μ κ°μκ°€ λ§μ•„μ§ λ• μ„±λ¥μ„ κ°μ„ ν•  μ μμ
- κ³µμ  κ°€λ¥ν• μƒνƒ(Intrinsic)μ™€ κ°λ³„μ μΈ μƒνƒ(Extrinsic)λ¥Ό λ¶„λ¦¬ν•μ—¬ ν¨μ¨μ μΈ λ©”λ¨λ¦¬ κ΄€λ¦¬ κ°€λ¥
- κ²μ„, κ·Έλν”½ μ‹μ¤ν…, ν…μ¤νΈ λ λ”λ§ λ“±μ—μ„ μ μ©ν•κ² ν™μ©λ¨

## κµ¬μ΅°

```
+------------------+
| Flyweight        |  (κ³µμ λλ” κ°μ²΄ μΈν„°νμ΄μ¤)
|------------------|
| operation()      |
+------------------+
       β–²
       |
+------------------+
| ConcreteFlyweight|  (κ³µμ  κ°μ²΄)
|------------------|
| operation()      |
+------------------+
       β–²
       |
+------------------+
| FlyweightFactory |  (κ³µμ  κ°μ²΄ κ΄€λ¦¬)
|------------------|
| getFlyweight()   |
+------------------+

+------------------+
| Client           |
|------------------|
| operation()      |
+------------------+
```

## κµ¬μ„± μ”μ†

- Flyweight(ν”λΌμ΄μ›¨μ΄νΈ, μΈν„°νμ΄μ¤): κ³µμ λ  κ°μ²΄μ κΈ°λ³Έ μΈν„°νμ΄μ¤
- ConcreteFlyweight(κµ¬μ²΄μ μΈ ν”λΌμ΄μ›¨μ΄νΈ, κ³µμ  κ°μ²΄): κ³µμ λλ” κ°μ²΄μ΄λ©°, λ‚΄λ¶€μ— κ³µμ ν•  μ μλ” μƒνƒ(Intrinsic State)λ¥Ό ν¬ν•¨
- FlyweightFactory(ν”λΌμ΄μ›¨μ΄νΈ ν©ν† λ¦¬, κ°μ²΄ κ΄€λ¦¬ μ—­ν• ): κ°μ²΄κ°€ μ¤‘λ³µ μƒμ„±λμ§€ μ•λ„λ΅ κ΄€λ¦¬ν•κ³ , κΈ°μ΅΄ κ°μ²΄λ¥Ό μ¬μ‚¬μ©ν•¨
- Client(ν΄λΌμ΄μ–ΈνΈ μ½”λ“): FlyweightFactoryλ¥Ό ν†µν•΄ κ³µμ  κ°μ²΄λ¥Ό κ°€μ Έμ™€μ„ μ‚¬μ©

## μμ 

```
// π Flyweight: λ¬Έμ κ°μ²΄ μΈν„°νμ΄μ¤
interface CharacterFlyweight {
  render(fontSize: number): void;
}

// π”  ConcreteFlyweight: κ³µμ λλ” λ¬Έμ κ°μ²΄
class Character implements CharacterFlyweight {
  private readonly char: string; // Intrinsic (κ³µμ ) μƒνƒ

  constructor(char: string) {
    this.char = char;
  }

  render(fontSize: number): void {
    console.log(`π“ '${this.char}' (Font Size: ${fontSize})`);
  }
}

// π­ FlyweightFactory: λ¬Έμ κ°μ²΄λ¥Ό κ΄€λ¦¬ν•λ” ν©ν† λ¦¬
class CharacterFactory {
  private characters: Map<string, Character> = new Map();

  getCharacter(char: string): Character {
    if (!this.characters.has(char)) {
      this.characters.set(char, new Character(char));
    }
    return this.characters.get(char)!;
  }
}

// π― Client Code
const factory = new CharacterFactory();

const charA1 = factory.getCharacter("A");
const charA2 = factory.getCharacter("A");
const charB = factory.getCharacter("B");

charA1.render(12);
charA2.render(18);
charB.render(14);

console.log(charA1 === charA2); // true (κ°™μ€ κ°μ²΄ κ³µμ )

// μ‹¤ν–‰ κ²°κ³Ό
π“ 'A' (Font Size: 12)
π“ 'A' (Font Size: 18)
π“ 'B' (Font Size: 14)
true
```

## μ‚¬μ©μ²

- λ€λ‰μ κ°μ²΄λ¥Ό μƒμ„±ν•΄μ•Ό ν•  λ•(ν…μ¤νΈ λ λ”λ§, κ²μ„ κ·Έλν”½ λ“±)
- κ°μ²΄μ μΌλ¶€ μ†μ„±μ€ κ³µμ ν•  μ μκ³ , μΌλ¶€ μ†μ„±λ§ κ°λ³„μ μΌλ΅ κ΄€λ¦¬ν•λ©΄ λ  λ•
- λ©”λ¨λ¦¬ μ‚¬μ©λ‰μ„ μ¤„μ΄κ³  μ„±λ¥μ„ μµμ ν™”ν•΄μ•Ό ν•  λ•
