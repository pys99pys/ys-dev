# ì±…ì„ ì²´ì¸ íŒ¨í„´(Chain of Responsibility Pattern)

í•˜ë‚˜ì˜ ìš”ì²­ì„ ì—¬ëŸ¬ ê°œì˜ ì²˜ë¦¬ ê°ì²´(í•¸ë“¤ëŸ¬)ê°€ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ëœ íŒ¨í„´

## íŠ¹ì§•

- ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ê°ì²´(í•¸ë“¤ëŸ¬)ë¥¼ ë™ì ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ìˆìŒ
- í•¸ë“¤ëŸ¬ê°€ ì„œë¡œ ë…ë¦½ì ì´ë¯€ë¡œ ê²°í•©ë„ê°€ ë‚®ì•„ì§€ê³  ìœ ì§€ë³´ìˆ˜ê°€ ì‰¬ì›€
- í´ë¼ì´ì–¸íŠ¸ëŠ” ìš”ì²­ì„ ë³´ë‚¼ ë¿, ëˆ„ê°€ ì²˜ë¦¬í•˜ëŠ”ì§€ ì‹ ê²½ ì“¸ í•„ìš” ì—†ìŒ
- ë¡œê·¸ ì²˜ë¦¬, ê¶Œí•œ ê²€ì‚¬, ì´ë²¤íŠ¸ ì²˜ë¦¬ ë“± ì—¬ëŸ¬ ë¶„ì•¼ì—ì„œ í™œìš© ê°€ëŠ¥

## êµ¬ì¡°

```
+------------------+
| Handler          |  (ì¶”ìƒ í•¸ë“¤ëŸ¬)
|------------------|
| setNext(handler) |  (ë‹¤ìŒ í•¸ë“¤ëŸ¬ ì„¤ì •)
| handle(request)  |  (ìš”ì²­ ì²˜ë¦¬)
+------------------+
       â–²
       |
+------------------+        +------------------+
| ConcreteHandlerA | -----> | ConcreteHandlerB |  (êµ¬ì²´ì ì¸ í•¸ë“¤ëŸ¬ë“¤)
|------------------|        |------------------|
| handle(request)  |        | handle(request)  |
+------------------+        +------------------+

+------------------+
| Client           |
|------------------|
| sendRequest()    |
+------------------+
```

## êµ¬ì„± ìš”ì†Œ

- Handler(í•¸ë“¤ëŸ¬ ì¸í„°í˜ì´ìŠ¤ ë˜ëŠ” ì¶”ìƒ í´ë˜ìŠ¤)
  - setNext(handler): ë‹¤ìŒ í•¸ë“¤ëŸ¬ë¥¼ ì„¤ì •í•˜ëŠ” ë©”ì„œë“œ
  - handle(request): ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ë©”ì„œë“œ
- ConcreteHandler(êµ¬ì²´ì ì¸ í•¸ë“¤ëŸ¬ í´ë˜ìŠ¤)
  - handle(request): ìš”ì²­ì„ ì²˜ë¦¬í•˜ê±°ë‚˜, ë‹¤ìŒ í•¸ë“¤ëŸ¬ì—ê²Œ ìš”ì²­ì„ ì „ë‹¬
- Client(í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ)
  - Handlerë¥¼ ì‚¬ìš©í•˜ì—¬ ìš”ì²­ì„ ì²˜ë¦¬
  - ì–´ë–¤ í•¸ë“¤ëŸ¬ê°€ ìš”ì²­ì„ ì²˜ë¦¬í• ì§€ ëª°ë¼ë„ ë¨

## ì˜ˆì œ

```
// ğŸ— Handler: ê¸°ë³¸ í•¸ë“¤ëŸ¬ ì¸í„°í˜ì´ìŠ¤
abstract class AuthHandler {
  private nextHandler?: AuthHandler;

  setNext(handler: AuthHandler): AuthHandler {
    this.nextHandler = handler;
    return handler; // ì²´ì´ë‹ì„ ìœ„í•´ ë°˜í™˜
  }

  handle(request: string): void {
    if (this.nextHandler) {
      this.nextHandler.handle(request);
    } else {
      console.log("â›” ì ‘ê·¼ ê±°ë¶€: ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
    }
  }
}

// ğŸ”‘ ConcreteHandler: ê´€ë¦¬ì ì¸ì¦
class AdminAuthHandler extends AuthHandler {
  handle(request: string): void {
    if (request === "admin") {
      console.log("âœ… ê´€ë¦¬ì ì¸ì¦ ì™„ë£Œ");
    } else {
      console.log("ğŸ”„ ê´€ë¦¬ì ì¸ì¦ ì‹¤íŒ¨, ë‹¤ìŒ ë‹¨ê³„ë¡œ...");
      super.handle(request);
    }
  }
}

// ğŸ”‘ ConcreteHandler: ì‚¬ìš©ì ì¸ì¦
class UserAuthHandler extends AuthHandler {
  handle(request: string): void {
    if (request === "user") {
      console.log("âœ… ì‚¬ìš©ì ì¸ì¦ ì™„ë£Œ");
    } else {
      console.log("ğŸ”„ ì‚¬ìš©ì ì¸ì¦ ì‹¤íŒ¨, ë‹¤ìŒ ë‹¨ê³„ë¡œ...");
      super.handle(request);
    }
  }
}

// ğŸ”‘ ConcreteHandler: ê²ŒìŠ¤íŠ¸ ì¸ì¦
class GuestAuthHandler extends AuthHandler {
  handle(request: string): void {
    if (request === "guest") {
      console.log("âœ… ê²ŒìŠ¤íŠ¸ ì¸ì¦ ì™„ë£Œ");
    } else {
      console.log("â›” ì¸ì¦ ì‹¤íŒ¨: ì ‘ê·¼ ë¶ˆê°€");
      super.handle(request);
    }
  }
}

// ğŸ¯ Client Code
const adminHandler = new AdminAuthHandler();
const userHandler = new UserAuthHandler();
const guestHandler = new GuestAuthHandler();

adminHandler.setNext(userHandler).setNext(guestHandler);

console.log("\nğŸ”¹ í…ŒìŠ¤íŠ¸ 1: ì‚¬ìš©ì ë¡œê·¸ì¸");
adminHandler.handle("user");

console.log("\nğŸ”¹ í…ŒìŠ¤íŠ¸ 2: ê²ŒìŠ¤íŠ¸ ë¡œê·¸ì¸");
adminHandler.handle("guest");

console.log("\nğŸ”¹ í…ŒìŠ¤íŠ¸ 3: ì¸ì¦ ì‹¤íŒ¨");
adminHandler.handle("unknown");

// ì‹¤í–‰ ê²°ê³¼
ğŸ”„ ê´€ë¦¬ì ì¸ì¦ ì‹¤íŒ¨, ë‹¤ìŒ ë‹¨ê³„ë¡œ...
âœ… ì‚¬ìš©ì ì¸ì¦ ì™„ë£Œ

ğŸ”„ ê´€ë¦¬ì ì¸ì¦ ì‹¤íŒ¨, ë‹¤ìŒ ë‹¨ê³„ë¡œ...
ğŸ”„ ì‚¬ìš©ì ì¸ì¦ ì‹¤íŒ¨, ë‹¤ìŒ ë‹¨ê³„ë¡œ...
âœ… ê²ŒìŠ¤íŠ¸ ì¸ì¦ ì™„ë£Œ

ğŸ”„ ê´€ë¦¬ì ì¸ì¦ ì‹¤íŒ¨, ë‹¤ìŒ ë‹¨ê³„ë¡œ...
ğŸ”„ ì‚¬ìš©ì ì¸ì¦ ì‹¤íŒ¨, ë‹¤ìŒ ë‹¨ê³„ë¡œ...
â›” ì¸ì¦ ì‹¤íŒ¨: ì ‘ê·¼ ë¶ˆê°€
```

## ì‚¬ìš©ì²˜

- ì—¬ëŸ¬ ê°œì˜ ì²˜ë¦¬ ë‹¨ê³„ê°€ ìˆê³ , íŠ¹ì • ë‹¨ê³„ì—ì„œ ìš”ì²­ì„ ì²˜ë¦¬í• ì§€ ê²°ì •í•´ì•¼ í•  ë•Œ
- ìš”ì²­ì„ ì²˜ë¦¬í•  í•¸ë“¤ëŸ¬ë¥¼ ë™ì ìœ¼ë¡œ ë³€ê²½í•  í•„ìš”ê°€ ìˆì„ ë•Œ
- ë¡œê·¸ ì²˜ë¦¬, ì´ë²¤íŠ¸ í•„í„°ë§, ê¶Œí•œ ê²€ì‚¬ ë“±ì—ì„œ ìœ ìš©

