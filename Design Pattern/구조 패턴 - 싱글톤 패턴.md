# ì‹±ê¸€í†¤ íŒ¨í„´(Singleton Pattern)

ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ë‹¨ í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë§Œ ì¡´ìž¬í•˜ë„ë¡ ë³´ìž¥í•˜ëŠ” ë””ìžì¸ íŒ¨í„´

## íŠ¹ì§•

- ì¸ìŠ¤í„´ìŠ¤ê°€ ë‹¨ í•˜ë‚˜ë§Œ ìƒì„±ë¨
- ë©”ëª¨ë¦¬ ì ˆì•½ ë° ì„±ëŠ¥ ìµœì í™”
- ì „ì—­ ìƒíƒœë¥¼ ê´€ë¦¬í•  ë•Œ ìœ ìš©
- ë‹¤ë¥¸ ê³³ì—ì„œ ì§ì ‘ ê°ì²´ë¥¼ ìƒì„±í•˜ì§€ ëª»í•˜ë„ë¡ ì œí•œ

## êµ¬ì¡°

```
+---------------+
| Singleton     |
|---------------|
| getInstance() |
+---------------+
        |
        v
(Single Instance)
```

## êµ¬ì„± ìš”ì†Œ

- Private Constructor(ë¹„ê³µê°œ ìƒì„±ìž): new í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ ì™¸ë¶€ì—ì„œ ê°ì²´ë¥¼ ìƒì„±í•˜ì§€ ëª»í•˜ë„ë¡ ë§‰ìŒ
- Static Instance(ì •ì  ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜): í´ëž˜ìŠ¤ ë‚´ë¶€ì—ì„œ ë‹¨ í•˜ë‚˜ì˜ ê°ì²´ë§Œ ìœ ì§€
- Public Static Method(ê³µê°œ ì •ì  ë©”ì„œë“œ): ê°ì²´ê°€ ì—†ìœ¼ë©´ ìƒˆë¡œ ìƒì„±í•˜ê³ , ìžˆìœ¼ë©´ ê¸°ì¡´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜

## ì˜ˆì œ

```
// ðŸ— Singleton Class
class Database {
  private static instance: Database;

  private constructor() {
    console.log("ðŸ“¡ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ìƒì„±ë¨");
  }

  static getInstance(): Database {
    if (!Database.instance) {
      Database.instance = new Database();
    }
    return Database.instance;
  }

  query(sql: string) {
    console.log(`ðŸ’¾ ì‹¤í–‰: ${sql}`);
  }
}

// ðŸŽ¯ Client Code
const db1 = Database.getInstance();
const db2 = Database.getInstance();

db1.query("SELECT * FROM users");

console.log(db1 === db2); // true (ê°™ì€ ì¸ìŠ¤í„´ìŠ¤)

// ì‹¤í–‰ ê²°ê³¼
ðŸ“¡ ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ìƒì„±ë¨
ðŸ’¾ ì‹¤í–‰: SELECT * FROM users
```

## ì‚¬ìš©ì²˜

- ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ í•˜ë‚˜ë§Œ ìœ ì§€í•˜ê³  ê³µìœ í•´ì•¼ í•  ë•Œ
- ì„¤ì •ê°’ì„ ì „ì—­ì—ì„œ ê³µìœ í•´ì•¼ í•  ë•Œ
- ë¡œê·¸ íŒŒì¼, ìºì‹± ì‹œìŠ¤í…œ, ìŠ¤ë ˆë“œ í’€ ë“±ì—ì„œ ë‹¨ì¼ ê°ì²´ê°€ í•„ìš”í•  ë•Œ

## í•œê³„

- ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œ ë™ê¸°í™” ì´ìŠˆ ë°œìƒ ê°€ëŠ¥ -> Lazy Initialization + Locking ì‚¬ìš©
- í…ŒìŠ¤íŠ¸í•˜ê¸° ì–´ë ¤ì›€(Mockingì´ íž˜ë“¦) -> ì˜ì¡´ì„± ì£¼ìž…(DI)ê³¼ í•¨ê»˜ ì‚¬ìš©
- ì „ì—­ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê¸° ë•Œë¬¸ì— ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë ¤ìš¸ ìˆ˜ ìžˆìŒ -> ìµœì†Œí•œìœ¼ë¡œ ì‚¬ìš©
