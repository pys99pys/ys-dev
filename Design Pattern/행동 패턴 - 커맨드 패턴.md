# ì»¤ë§¨ë“œ íŒ¨í„´(Command Pattern)

ìš”ì²­ì„ ê°ì²´ë¡œ ìº¡ìŠí™”í•˜ì—¬ ìš”ì²­ì„ ì €ì¥, ì‹¤í–‰, ì·¨ì†Œ(Undo)í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ë””ìì¸ íŒ¨í„´

## íŠ¹ì§•

- ìš”ì²­ì„ ê°ì²´(Command)ë¡œ ë§Œë“¤ì–´ ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰, ì·¨ì†Œ(Undo), ì¬ì‹¤í–‰(Redo) ê°€ëŠ¥
- í´ë¼ì´ì–¸íŠ¸(Invoker)ì™€ ì‹¤í–‰ ê°ì²´(Receiver) ê°„ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶œ ìˆ˜ ìˆìŒ
- ë§¤í¬ë¡œ(ì—¬ëŸ¬ ê°œì˜ ëª…ë ¹ì„ ë¬¶ì–´ì„œ ì‹¤í–‰) ê¸°ëŠ¥ì„ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆìŒ
- ë²„íŠ¼ í´ë¦­, í‚¤ë³´ë“œ ì…ë ¥, UI ì´ë²¤íŠ¸ ì²˜ë¦¬ ë“±ì— ìì£¼ í™œìš©

## êµ¬ì¡°

```
+------------------+
| Command          |  (ëª…ë ¹ ì¸í„°í˜ì´ìŠ¤)
|------------------|
| execute()        |  (ì‹¤í–‰)
| undo()           |  (ì‹¤í–‰ ì·¨ì†Œ)
+------------------+
       â–²
       |
+------------------+         +------------------+
| ConcreteCommand  | ------> | Receiver         |  (ì‹¤ì œ ë™ì‘ì„ ìˆ˜í–‰í•˜ëŠ” ê°ì²´)
|------------------|         |------------------|
| execute()        |         | action()         |
| undo()           |         | revertAction()   |
+------------------+         +------------------+
       â–²
       |
+------------------+
| Invoker          |  (í´ë¼ì´ì–¸íŠ¸)
|------------------|
| setCommand()     |
| execute()        |
| undo()           |
+------------------+
```

## êµ¬ì„± ìš”ì†Œ

- Command(ì»¤ë§¨ë“œ ì¸í„°í˜ì´ìŠ¤ ë˜ëŠ” ì¶”ìƒ í´ë˜ìŠ¤): ì‹¤í–‰(execute())ê³¼ ì‹¤í–‰ ì·¨ì†Œ(undo()) ë©”ì„œë“œë¥¼ ì •ì˜
- ConcreteCommand(êµ¬ì²´ì ì¸ ëª…ë ¹ í´ë˜ìŠ¤): Command ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ì—¬ ì‹¤ì œ ë™ì‘ì„ ìˆ˜í–‰
- Receiver(ìˆ˜ì‹ ì, ì‹¤ì œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ê°ì²´): Commandê°€ ì‹¤í–‰í•  ì‹¤ì œ ë™ì‘ì„ í¬í•¨í•˜ëŠ” ê°ì²´
- Invoker(ìš”ì²­ì„ ë³´ë‚´ëŠ” í´ë¼ì´ì–¸íŠ¸, ì‹¤í–‰ ë° ì·¨ì†Œ ë‹´ë‹¹): Command ê°ì²´ë¥¼ ì‹¤í–‰í•˜ê±°ë‚˜ ì·¨ì†Œí•˜ëŠ” ì—­í• 
- Client(í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ): Invokerì— Commandë¥¼ ì„¤ì •í•˜ì—¬ ì‹¤í–‰ ìš”ì²­ì„ ë³´ëƒ„

## ì˜ˆì œ

```
// ğŸ— Command: ëª…ë ¹ ì¸í„°í˜ì´ìŠ¤
interface Command {
  execute(): void;
  undo(): void;
}

// ğŸ’¡ Receiver: ì‹¤ì œ ì¥ì¹˜ (ì „ë“±)
class Light {
  on(): void {
    console.log("ğŸ’¡ ì „ë“± ì¼œì§");
  }

  off(): void {
    console.log("ğŸ”Œ ì „ë“± êº¼ì§");
  }
}

// ğŸ”˜ ConcreteCommand: ì „ë“± ì¼œê¸° ëª…ë ¹
class LightOnCommand implements Command {
  private light: Light;

  constructor(light: Light) {
    this.light = light;
  }

  execute(): void {
    this.light.on();
  }

  undo(): void {
    this.light.off();
  }
}

// ğŸ”˜ ConcreteCommand: ì „ë“± ë„ê¸° ëª…ë ¹
class LightOffCommand implements Command {
  private light: Light;

  constructor(light: Light) {
    this.light = light;
  }

  execute(): void {
    this.light.off();
  }

  undo(): void {
    this.light.on();
  }
}

// ğŸ® Invoker: ë¦¬ëª¨ì»¨ (ì»¤ë§¨ë“œ ì‹¤í–‰)
class RemoteControl {
  private command?: Command;

  setCommand(command: Command): void {
    this.command = command;
  }

  pressButton(): void {
    if (this.command) {
      this.command.execute();
    }
  }

  pressUndo(): void {
    if (this.command) {
      this.command.undo();
    }
  }
}

// ğŸ¯ Client Code
const light = new Light();
const lightOn = new LightOnCommand(light);
const lightOff = new LightOffCommand(light);
const remote = new RemoteControl();

console.log("\nğŸ”¹ ì „ë“± ì¼œê¸° ë²„íŠ¼ ëˆ„ë¦„");
remote.setCommand(lightOn);
remote.pressButton();

console.log("\nğŸ”¹ ì‹¤í–‰ ì·¨ì†Œ ë²„íŠ¼ ëˆ„ë¦„");
remote.pressUndo();

console.log("\nğŸ”¹ ì „ë“± ë„ê¸° ë²„íŠ¼ ëˆ„ë¦„");
remote.setCommand(lightOff);
remote.pressButton();

// ì‹¤í–‰ ê²°ê³¼
ğŸ”¹ ì „ë“± ì¼œê¸° ë²„íŠ¼ ëˆ„ë¦„
ğŸ’¡ ì „ë“± ì¼œì§

ğŸ”¹ ì‹¤í–‰ ì·¨ì†Œ ë²„íŠ¼ ëˆ„ë¦„
ğŸ”Œ ì „ë“± êº¼ì§

ğŸ”¹ ì „ë“± ë„ê¸° ë²„íŠ¼ ëˆ„ë¦„
ğŸ”Œ ì „ë“± êº¼ì§
```

## ì‚¬ìš©ì²˜

- ìš”ì²­ì„ ì‹¤í–‰, ì·¨ì†Œ(Undo), ì¬ì‹¤í–‰(Redo)í•  ìˆ˜ ìˆì–´ì•¼ í•  ë•Œ
- ìš”ì²­ì„ íì— ì €ì¥í•˜ê±°ë‚˜, ì´ë ¥ì„ ê´€ë¦¬í•´ì•¼ í•  ë•Œ
- UI ë²„íŠ¼ í´ë¦­, í‚¤ë³´ë“œ ì…ë ¥, í…ìŠ¤íŠ¸ í¸ì§‘ê¸° ë“±ì˜ ì´ë²¤íŠ¸ ì²˜ë¦¬ë¥¼ ìº¡ìŠí™”í•  ë•Œ
- ë§¤í¬ë¡œ(ì—¬ëŸ¬ ê°œì˜ ëª…ë ¹ì„ í•˜ë‚˜ë¡œ ë¬¶ì–´ì„œ ì‹¤í–‰) ê¸°ëŠ¥ì´ í•„ìš”í•  ë•Œ
